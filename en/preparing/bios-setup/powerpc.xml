<!-- retain these comments for translator revision tracking -->
<!-- $Id: powerpc.xml 54285 2008-07-13 12:09:54Z fjp $ -->


  <sect2 arch="powerpc" id="invoking-openfirmware">
  <title>Invoking OpenFirmware</title>
<para>

There is normally no need to set up the BIOS (called OpenFirmware) on
&arch-title; systems. PReP and CHRP are equipped with OpenFirmware,
but unfortunately, the means you use to invoke it vary from
manufacturer to manufacturer.  You'll have to consult the hardware
documentation which came with your machine.

</para><para>

On &arch-title; Macintoshes, you invoke OpenFirmware with
<keycombo><keycap>Command (cloverleaf/Apple)</keycap><keycap>Option</keycap><keycap>o</keycap><keycap>f</keycap></keycombo>
while booting.  Generally it will check for these keystrokes after the
chime, but the exact timing varies from model to model.  See
<ulink url="&url-netbsd-powerpc-faq;"></ulink> for more hints.

</para><para>

The OpenFirmware prompt looks like this:

<informalexample><screen>
ok
0 &gt;
</screen></informalexample>

Note that on older model &arch-title; Macs, the default and sometimes
hardwired I/O for OpenFirmware user interaction is through the serial
(modem) port. If you invoke OpenFirmware on one of these machines, you
will just see a black screen. In that case, a terminal program running
on another computer, connected to the modem port, is needed to
interact with OpenFirmware.

</para><para>

The OpenFirmware on OldWorld Beige G3 machines, OF versions 2.0f1
and 2.4, is broken. These machines will most likely not be able to
boot from the hard drive unless the firmware is patched. A firmware
patch is included in the <application>System Disk 2.3.1</application>
utility, available from Apple at
<ulink url="ftp://ftp.apple.com/developer/macosxserver/utilities/SystemDisk2.3.1.smi.bin"></ulink>.
After unpacking the utility in MacOS, and launching it, select the
<guibutton>Save</guibutton> button to have the firmware patches
installed to nvram.

</para>
  </sect2>


  <sect2 arch="ppc64el" id="update-firmware">
  <title> How to update bare metal ppc64el firmware </title>
<para>
	blablabla
</para>

<sect2 arch="ppc64el"> <title>Updating KVM guest firmware (SLOF)</title>
<para>
  blablabla
</para>
</sect2>

<sect2 arch="ppc64el"> <title>Updating PowerKVM hypervisor</title>
  <sect3 arch="ppc64el"> <title>Instructions for Netboot installation</title>
<para>
You will need a DHCP/TFTP (BOOTP) server, as well as a web server.
After downloading ibm-powerkvm-*-ppc64-service-*.iso, mount loop it and
unpack it into some directory within your HTTP server www root 
structure (say wwwroot):

<informalexample><screen>
# cd &lt;directory-where-the-iso-is&gt;
# mkdir ./iso
# sudo mount -o loop ibm-powerkvm-*-ppc64-service-*.iso ./iso
# cp -a ./iso/* &lt;path-to-wwwroot&gt;
</screen></informalexample>

Create the petitboot.conf file in a directory under your tftproot, say
/tftproot/powerkvm, with the following contents:

<informalexample><screen>
label PowerKVM Automated Install
kernel http://YOUR-SERVER-IP/SOME-PATH-TO-wwwroot/ppc/ppc64/vmlinuz
initrd http://YOUR-SERVER-IP/SOME-PATH-TO-wwwroot/ppc/ppc64/initrd.img
append root=live:http://YOUR-SERVER-IP/SOME-PATH-TO-wwwroot/LiveOS/squashfs.img repo=http://YOUR-SERVER-IP/SOME-PATH-TO-wwwroot/packages rd.dm=0 rd.md=0 console=hvc0 console=tty0
</screen></informalexample>

Edit your dhcpd.conf

</para><para>

Set this directive at the beginning:

<informalexample><screen>
option conf-file code 209 = text;
</screen></informalexample>

Add the system directive:

<informalexample><screen>
host <your-system> {
    hardware ethernet &lt;system macaddr&gt;
    fixed-address &lt;system ip&gt;;
    option host-name "&lt;system hostname&gt;";
    option conf-file "&lt;powerkvm/petitboot.conf&gt;";
 }
</screen></informalexample>

Reboot the dhcp server.
</para><para>
Boot your PowerLinux machine.
</para><para>
There should be the following option at petitboot (select it):
<informalexample><screen>
"Power KVM Automated Install" 
</screen></informalexample>
The installer menu should appear automatically.
</para>
</sect3>

<sect3 arch="ppc64el"> <title>Instructions for DVD</title>
<para>
Boot the ISO ibm-powerkvm-*-ppc64-service-*.iso (either burn a DVD or
make it virtual if using QEMU) and simply wait for the boot.
</para><para>
There should be the following option at petitboot (select it):
<informalexample><screen>
"POWERKVM_LIVECD" 
</informalexample></screen>
The installer menu should appear automatically.
</para>
</sect3>
</sect2>

<sect2 arch="ppc64el"> <title>Updating PowerVM hypervisor</title>
<para>
  blablabla
</para>
</sect2>



  </sect2>

